# TaskNotes 4.1.2

## Fixed

- Significant performance improvements for Bases views (TaskList, Kanban, Calendar)
  - Reduced `extractDataItems` time from ~4 seconds to ~5-10ms for large vaults (6000+ tasks)
  - Computed file properties (`file.backlinks`, `file.links`, etc.) are now fetched lazily during render instead of upfront
  - Only visible items (with virtualization) trigger expensive property computations
  - Added debouncing to `onDataUpdated` to prevent UI freezes during typing
  - Timeblock generation now uses Obsidian's metadataCache instead of file reads
  - Added date range filtering for calendar events to skip events outside visible range
  - (#1285) Calendar view uses 5-second debounce to prevent flickering while typing
	  - Thanks to @steven-murray for reporting
- Calendar view switching (month/week/day/list) is now much faster
  - View type is now saved on unload instead of on every change
- Fixed task edit modal archive button being too narrow on mobile devices
- (#1319) Added missing properties to Field Mapping settings
  - `recurrence_anchor` - now in Settings > Task Properties > Task Details
  - `skipped_instances` - now in Settings > Task Properties > Metadata Properties
  - Thanks to @kazerniel for reporting
- (#1310) Fixed inline task conversion deleting text when task title exceeds filename limits
  - Text that cannot fit in the filename is now preserved in the task note's body
  - Thanks to @prayidae for reporting
- (#1301) Fixed inline task wikilinks leaving blank space when no metadata properties are visible
  - Thanks to @Richard-UMPV for reporting
- (#1317) Fixed project autosuggest filters not working correctly when only "Required Property Key" is configured
  - NLP `+` trigger now properly filters by property existence when no property value is specified
  - Modal "Add to project" button now shows consistent results with inline autosuggest
  - Thanks to @JacksonMcDonaldDev for reporting
- (#1287), (#1307) The "New" button in Bases views now opens the TaskNotes creation modal
  - Tasks created from Bases views now respect default properties (status, priority, etc.)
  - Tasks are now created in the configured default folder instead of the views folder
  - Thanks to @anareaty and @sylvainfct-dot for reporting
- (#1291) Fixed Microsoft Calendar OAuth documentation using wrong redirect URI
  - Added instructions for configuring via Azure manifest editor
  - Thanks to @PlecotusAustriacus for reporting

## Added

- (#803) New command "Convert current note to task" to add task properties to an existing note
  - Thanks to @GardarikanetS and @diegomarzaa for suggesting
- (#1080) Custom user fields now support default values
  - Each field type has an appropriate input: text field, number input, toggle, date preset dropdown, or comma-separated list
  - Defaults are applied when creating tasks via modal, instant conversion, "Create or open task" command, or HTTP API
  - Thanks to @bradyrx for suggesting

## Changed

- Added documentation link to settings panel (links to tasknotes.dev)
- Reorganized settings panel for improved discoverability
  - Removed "Defaults" tab - default values are now configured alongside each property in the Task Properties tab
  - Moved task filename format settings to the Title property section
  - Moved project autosuggest settings to the Projects property section
  - Body template setting moved to the Features tab
  - Added descriptions to each property explaining its purpose
  - Moved "Folder for converted tasks" setting to General tab under Task Storage for better discoverability
  - Updated setting description to clarify that leaving empty uses the default tasks folder

